datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        Int         @id @default(autoincrement())
  email     String      @unique
  name      String
  password  String
  role      Role
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  formInput FormInput[]
}

model Place {
  id   Int    @id @default(autoincrement())
  name String @unique
}

model FormInput {
  id             Int      @id @default(autoincrement())
  lokasi         String
  lat            Float
  long           Float
  img            String?
  jmlhBantuan    Int
  jenisBantuan   String
  jmlhKK         Int
  jmlhMasyarakat Int
  jmlhPerempuan  Int
  jmlhLaki       Int
  debitAir       String
  pemakaianAir   String
  sanitasi       String
  createdAt      DateTime @default(now())

  userId Int
  user   User @relation(fields: [userId], references: [id])

  outcome Outcome? @relation("FormInputToOutcome") // Relasi tanpa `fields` dan `references`
  dampak  Dampak?  @relation("FormInputToDampak")
}

model Outcome {
  id                              Int      @id @default(autoincrement())
  formInputId                     Int      @unique
  konsumsiAirPerTahun             Float
  kualitasAir                     String
  rataRataTerpaparPenyakitSebelum Int
  rataRataTerpaparPenyakitSesudah Int
  awarenessMasyarakat             String
  penilaianSaranaAirBersih        String
  penilaianSanitasi               String
  deskripsiAwareness              String
  createdAt                       DateTime @default(now())

  formInput FormInput @relation("FormInputToOutcome", fields: [formInputId], references: [id])
}

model Dampak {
  id                                Int      @id @default(autoincrement())
  formInputId                       Int      @unique
  biayaBerobatSebelum               Float
  biayaBerobatSesudah               Float
  biayaAirBersihSebelum             Float
  biayaAirBersihSesudah             Float
  peningkatanEkonomiSebelum         Float
  peningkatanEkonomiSesudah         Float
  penurunanOrangSakitSebelum        Int
  penurunanOrangSakitSesudah        Int
  penurunanStuntingSebelum          Int
  penurunanStuntingSesudah          Int
  peningkatanIndeksKesehatanSebelum Float
  peningkatanIndeksKesehatanSesudah Float
  volumeLimbahDikelola              Float
  prosesKonservasiAir               Boolean
  penurunanIndexPencemaranSebelum   Float
  penurunanIndexPencemaranSesudah   Float
  createdAt                         DateTime @default(now())

  formInput FormInput @relation("FormInputToDampak", fields: [formInputId], references: [id])
}

enum Role {
  ADMIN
  PETUGAS
}
